// Code generated by osspec-gen-go. DO NOT EDIT.

package v1

import (
	"context"
	"encoding/json"
)

type DatasetErrorKind string

const (
	DatasetErrorKind_ENGINE_ERROR        DatasetErrorKind = "engine_error"
	DatasetErrorKind_MISSING_DATASET     DatasetErrorKind = "missing_dataset"
	DatasetErrorKind_MISSING_INTEGRATION DatasetErrorKind = "missing_integration"
	DatasetErrorKind_PERMISSION_DENIED   DatasetErrorKind = "permission_denied"
	DatasetErrorKind_SYNC_FAILED         DatasetErrorKind = "sync_failed"
)

type ScopeKind string

const (
	ScopeKind_CONNECTOR_INSTANCE ScopeKind = "connector_instance"
	ScopeKind_GLOBAL             ScopeKind = "global"
)

type EvalContext struct {
	ScopeKind         ScopeKind `json:"scope_kind"`
	ConnectorKind     string    `json:"connector_kind,omitempty"`
	ConnectorInstance string    `json:"connector_instance,omitempty"`
}

type DatasetRef struct {
	Dataset string `json:"dataset"`
	Version int    `json:"version"`
}

type DatasetError struct {
	Kind    DatasetErrorKind `json:"kind"`
	Message string           `json:"message,omitempty"`
}

type DatasetResult struct {
	Rows  []json.RawMessage `json:"rows,omitempty"`
	Error *DatasetError     `json:"error,omitempty"`
}

type DatasetProvider interface {
	Capabilities(ctx context.Context) []DatasetRef
	GetDataset(ctx context.Context, eval EvalContext, ref DatasetRef) DatasetResult
}
